{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table",
  "type": "registry:component",
  "title": "Data Table",
  "description": "A data table component",
  "dependencies": [
    "@tanstack/react-table",
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "button-group",
    "checkbox",
    "dropdown-menu",
    "table"
  ],
  "files": [
    {
      "path": "registry/components/data-table/index.tsx",
      "content": "\"use client\";\n\nimport {\n  flexRender,\n  getCoreRowModel,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport { ButtonGroup } from \"@/components/ui/button-group\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { ChevronDown, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport type {\n  Column,\n  ColumnDef,\n  RowData,\n  RowSelectionState,\n  TableOptions,\n} from \"@tanstack/react-table\";\n\nimport type { CSSProperties, ReactNode } from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { cn } from \"@/lib/utils\";\n\nfunction getCommonPinningStyles<TData>(column: Column<TData>): CSSProperties {\n  const isPinned = column.getIsPinned();\n\n  return {\n    left: isPinned === \"left\" ? `${column.getStart(\"left\")}px` : undefined,\n    right: isPinned === \"right\" ? `${column.getAfter(\"right\")}px` : undefined,\n    width: column.getSize(),\n  };\n}\n\nfunction getCommonPinningClassNames<TData>(column: Column<TData>): string {\n  const isPinned = column.getIsPinned();\n  return cn(isPinned ? \"sticky z-1\" : \"relative z-0\");\n}\n\nexport interface DataTablePaginationProps {\n  hasPreviousPage?: boolean;\n  hasNextPage?: boolean;\n  onPreviousPage?: () => void;\n  onNextPage?: () => void;\n}\n\nexport type DataTableColumnProps<\n  TData extends RowData,\n  TValue = unknown,\n> = ColumnDef<TData, TValue> & {\n  pinned?: \"left\" | \"right\" | false;\n};\n\nexport interface DataTableProps<TData extends RowData, TValue = unknown> {\n  columns: Array<DataTableColumnProps<TData, TValue>>;\n  data: Array<TData>;\n\n  pagination?: DataTablePaginationProps;\n\n  onRowSelectionChange?: (rows: Array<TData>) => void;\n  onAllRowsSelectedChange?: (selected: boolean) => void;\n\n  bulkActions?: ReactNode;\n\n  getRowId?: TableOptions<TData>[\"getRowId\"];\n}\n\nexport function DataTable<TData extends RowData, TValue = unknown>({\n  columns,\n  data,\n  pagination,\n  bulkActions,\n  onRowSelectionChange,\n  onAllRowsSelectedChange,\n  getRowId = (row, index) =>\n    (typeof row === \"object\" &&\n    row !== null &&\n    \"id\" in row &&\n    (typeof row.id === \"string\" || typeof row.id === \"number\")\n      ? row.id\n      : index\n    ).toString(),\n}: DataTableProps<TData, TValue>) {\n  const columnsWithSelection = useMemo(() => {\n    return [\n      ...(onRowSelectionChange\n        ? [\n            {\n              id: \"select\",\n              header: ({ table }) => (\n                <Checkbox\n                  checked={\n                    table.getIsAllPageRowsSelected() ||\n                    (table.getIsSomePageRowsSelected() && \"indeterminate\")\n                  }\n                  onCheckedChange={(value) =>\n                    table.toggleAllPageRowsSelected(!!value)\n                  }\n                />\n              ),\n              cell: ({ row }) => (\n                <Checkbox\n                  checked={row.getIsSelected()}\n                  onCheckedChange={(value) => row.toggleSelected(!!value)}\n                />\n              ),\n              enableSorting: false,\n              enableHiding: false,\n              size: 32,\n              pinned: \"left\",\n            } satisfies DataTableColumnProps<TData, TValue>,\n          ]\n        : []),\n      ...columns,\n    ];\n  }, [columns]);\n\n  const tableColumns: Array<ColumnDef<TData, TValue>> = useMemo(() => {\n    return columnsWithSelection.map((column) => ({\n      accessorKey: column.id,\n      ...column,\n    }));\n  }, [columnsWithSelection, onRowSelectionChange]);\n\n  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});\n  const [isAllPageRowsSelected, setIsAllPageRowsSelected] = useState(false);\n\n  const table = useReactTable<TData>({\n    data,\n    columns: tableColumns,\n    state: {\n      columnPinning: {\n        left: columnsWithSelection\n          .filter((column) => column.pinned === \"left\")\n          .map((column) => column.id!),\n        right: columnsWithSelection\n          .filter((column) => column.pinned === \"right\")\n          .map((column) => column.id!),\n      },\n      rowSelection,\n    },\n    getRowId,\n    getCoreRowModel: getCoreRowModel(),\n    onRowSelectionChange: setRowSelection,\n  });\n\n  useEffect(() => {\n    onRowSelectionChange?.(\n      table.getSelectedRowModel().rows.map((row) => row.original),\n    );\n\n    if (table.getSelectedRowModel().rows.length !== table.getRowCount()) {\n      setIsAllPageRowsSelected(false);\n    }\n  }, [onRowSelectionChange, table.getSelectedRowModel().rows]);\n\n  useEffect(() => {\n    onAllRowsSelectedChange?.(isAllPageRowsSelected);\n  }, [isAllPageRowsSelected, onAllRowsSelectedChange]);\n\n  return (\n    <div>\n      <div className=\"relative overflow-auto rounded-md border\">\n        {/* batch actions */}\n        {Object.keys(rowSelection).length > 0 && (\n          <div className=\"bg-background absolute top-0 left-0 z-100 flex h-10 w-full items-center gap-2 px-2\">\n            <Checkbox\n              checked={\n                table.getIsAllPageRowsSelected() ||\n                (table.getIsSomePageRowsSelected() && \"indeterminate\")\n              }\n              onCheckedChange={(value) =>\n                table.toggleAllPageRowsSelected(!!value)\n              }\n            />\n\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\">\n                  {isAllPageRowsSelected\n                    ? \"All selected\"\n                    : `${Object.keys(rowSelection).length} selected`}\n                  <ChevronDown />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuGroup>\n                  {!table.getIsAllPageRowsSelected() && (\n                    <DropdownMenuItem\n                      onClick={() => table.toggleAllPageRowsSelected(true)}\n                    >\n                      Select all {table.getRowCount()} on page\n                    </DropdownMenuItem>\n                  )}\n\n                  {!isAllPageRowsSelected && (\n                    <DropdownMenuItem\n                      onClick={() => {\n                        table.toggleAllPageRowsSelected(true);\n                        setIsAllPageRowsSelected(true);\n                      }}\n                    >\n                      Select all\n                    </DropdownMenuItem>\n                  )}\n\n                  <DropdownMenuItem\n                    onClick={() => table.toggleAllPageRowsSelected(false)}\n                  >\n                    Unselect all\n                  </DropdownMenuItem>\n                </DropdownMenuGroup>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            {bulkActions}\n          </div>\n        )}\n\n        <Table className=\"bg-background table-fixed\">\n          <TableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => {\n                  return (\n                    <TableHead\n                      key={header.id}\n                      className={cn(\n                        \"bg-background whitespace-normal\",\n                        getCommonPinningClassNames<TData>(header.column),\n                      )}\n                      style={{\n                        ...getCommonPinningStyles<TData>(header.column),\n                      }}\n                    >\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext(),\n                          )}\n                    </TableHead>\n                  );\n                })}\n              </TableRow>\n            ))}\n          </TableHeader>\n          <TableBody>\n            {table.getRowModel().rows?.length ? (\n              table.getRowModel().rows.map((row) => (\n                <TableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && \"selected\"}\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <TableCell\n                      key={cell.id}\n                      className={cn(\n                        \"bg-background whitespace-normal\",\n                        getCommonPinningClassNames<TData>(cell.column),\n                      )}\n                      style={{\n                        ...getCommonPinningStyles<TData>(cell.column),\n                      }}\n                    >\n                      {flexRender(\n                        cell.column.columnDef.cell,\n                        cell.getContext(),\n                      )}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell\n                  colSpan={columns.length}\n                  className=\"bg-background h-24 text-center\"\n                >\n                  No results.\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {pagination && (\n        <div className=\"flex items-center justify-center py-4\">\n          <ButtonGroup>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={pagination.onPreviousPage}\n              disabled={!pagination.hasPreviousPage}\n            >\n              <ChevronLeft />\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={pagination.onNextPage}\n              disabled={!pagination.hasNextPage}\n            >\n              <ChevronRight />\n            </Button>\n          </ButtonGroup>\n        </div>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/turboost-ui/data-table/index.tsx"
    }
  ]
}